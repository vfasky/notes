define("catke/http",["jquery","catke/popTips"],function(t,i){"use strict";var e,n=function(e,n,s,r){var o=t.Deferred();return r&&-1!==r.indexOf("json")&&(s=JSON.stringify(s)),r=r||"application/x-www-form-urlencoded; charset=UTF-8",t.ajax(n,{type:e,cache:!1,data:s||{},dataType:"json",contentType:r}).done(function(t){t.state===!1?(i.error(t.error||"发生未知错误"),t.url&&setTimeout(function(){window.location.href=t.url},800)):o.resolve(t.data)}).fail(function(){i.error("服务端发生错误了"),o.reject()}),o.promise()},s={get:function(t,i,s){var r=!1;return s!==e&&(r="application/json;charset=utf-8"),n("GET",t,i,r)},post:function(t,i,s){var r=!1;return s!==e&&(r="application/json;charset=utf-8"),n("POST",t,i,r)},put:function(t,i,s){var r=!1;return s!==e&&(r="application/json;charset=utf-8"),n("PUT",t,i,r)},head:function(t,i,s){var r=!1;return s!==e&&(r="application/json;charset=utf-8"),n("HEAD",t,i,r)},del:function(t,i,s){var r=!1;return s!==e&&(r="application/json;charset=utf-8"),n("DELETE",t,i,r)}};return s}),define("catke/placeholder",["jquery","catke/util","catke/task"],function(t,i,e){"use strict";if(!i.ie||i.ie>9)return function(){};var n=0,s=function(i,s){var r=this;this.id=n,n++,this.$el=i,this.config=t.extend({color:"#999"},s||{}),this.$tip=this.build(),this.set(this.$el.attr("placeholder")),this.buildCss(),this.isHidden()&&new e(function(t){!1===r.isHidden()&&(r.setPostion(),t.remove())}),this.$parent=this.$el.parent(),"static"===this.$parent.css("position")&&this.$parent.css("position","relative"),this.setPostion(),this.$tip.insertAfter(this.$el).click(function(){r.$el.focus()}),this.$el.on("blur change",function(){""===t.trim(r.$el.val())?r.$tip.show():r.$tip.hide()}).on("focus",function(){r.$tip.hide()}),""!==t.trim(this.$el.val())&&r.$tip.hide(),t(window).on("resize.placeholder"+this.id+", scroll.placeholder"+this.id,function(){!1===r.isHidden()&&r.setPostion()})};return s.prototype.isHidden=function(){return!1===this.$el.is(":visible")},s.prototype.setPostion=function(){var t=this.$el.position();this.$tip.css(t)},s.prototype.set=function(i){this.$tip.text(i),""!==t.trim(this.$el.val())&&this.$tip.hide()},s.prototype.build=function(){var i=t("<span></span>");return i},s.prototype.buildCss=function(){var t=this,i=t.$el.outerHeight();this.$tip.css({color:t.config.color,fontSize:t.$el.css("fontSize")||"12px",padding:t.$el.css("padding")||"0",paddingTop:0,paddingLeft:t.$el.css("paddingLeft"),margin:t.$el.css("margin")||"0",width:t.$el.outerWidth(),height:i,lineHeight:i+"px",position:"absolute"})},function(i){i=i||t("[placeholder]"),i.each(function(){var i=t(this),e=i.data("placeholder");e?e.set&&e.set(i.attr("placeholder")):(e=new s(i),i.data("placeholder",e))})}}),define("catke/popTips",["jquery"],function(t){"use strict";var i=function(){var i,e,n=function(n,r,o,a){e&&clearTimeout(e),t.isFunction(o)&&(a=o,o=3e3),a=a||function(){},o=o||3e3,i&&i.stop().remove(),i=t(s(n,r)).appendTo(document.body).hide(),i.css({marginLeft:-(i.width()/2),marginTop:-(i.height()/2)}).fadeIn("fase",function(){e=setTimeout(function(){i.stop().remove(),a()},o)})},s=function(t,i){var e=[];switch(t){case"success":e.push('<div class="ck-poptips success"><i class="nicon nicon-success"></i>'+i+"</div>");break;case"error":e.push('<div class="ck-poptips error"><i class="nicon nicon-error"></i>'+i+"</div>");break;case"warning":e.push('<div class="ck-poptips warning"><i class="nicon nicon-warning"></i>'+i+"</div>")}return e.join("")};return{success:function(t,i,e){n("success",t,i,e)},error:function(t,i,e){n("error",t,i,e)},warning:function(t,i,e){n("warning",t,i,e)}}};return i()}),define("catke/task",["jquery"],function(t){"use strict";var i=0,e=[],n=null,s=function(){var i=0;return t.each(e,function(t,e){e&&i++}),i},r=function(){!n&&s()>0&&(n=setInterval(function(){t.each(e,function(i,e){e&&t.isFunction(e.callback)&&e.callback(e)})},200))},o=function(t){this.id=i,this.callback=t,i++,this.run()};return o.prototype.run=function(){var i=!1,n=this;t.each(e,function(t,e){return e&&e.id===n.id?(i=!0,!1):void 0}),!1===i&&e.push(this),r()},o.prototype.remove=function(){var i=this;t.each(e,function(t,n){return n&&n.id===i.id?(delete e[t],!1):void 0}),0===s()&&n&&(clearInterval(n),e=[],n=null)},o}),define("catke/toolTips",["jquery"],function(t){"use strict";var i=function(i,e){this.$element=i,this.options=t.extend({},{delay:0,content:"",tipClass:"",placement:"right",trigger:"hover click",container:document.body},e),this.init()};return i.prototype.init=function(){this.$tips=t('<div class="ck-tooltips"><div class="tooltips-arrow"></div><div class="tooltips-title"></div><div class="tooltips-inner"></div></div>'),this.$tips.addClass(this.options.placement).addClass(this.options.tipClass),this.setContent(),this.isShow=!1,this.$el=this.$tips;for(var i,e=this.options.trigger.split(" "),n=0;n<e.length;n++)if(i=e[n],"click"===i)this.$element.on(i+".ck-tooltips",t.proxy(this.toggle,this));else if("manual"!==i){var s="hover"===i?"mouseenter":"focus",r="hover"===i?"mouseleave":"blur";this.$element.on(s,t.proxy(this.show,this)),this.$element.on(r,t.proxy(this.hide,this))}this.options.container?this.$tips.appendTo(this.options.container):this.$tips.insertAfter(this.$element),this.hide()},i.prototype.setContent=function(i){i=t.trim(i||this.options.content),0===i.length&&(i=this.$element.attr("data-content")||"");var e=this.$tips;e.find(".tooltips-inner").html(i)},i.prototype.setPosition=function(){var t=this.getOffset();this.$tips.css(t)},i.prototype.getOffset=function(){var t=this.options.placement,i=this.$element,e=this.$tips,n=i.offset(),s=i.outerWidth(),r=i.outerHeight(),o=e.outerWidth(),a=e.outerHeight();switch(t){case"left":return{top:n.top+r/2-a/2,left:n.left-o};case"top":return{top:n.top-a,left:n.left+s/2-o/2};case"right":return{top:n.top+r/2-a/2,left:n.left+s};case"bottom":return{top:n.top+r,left:n.left+s/2-o/2}}},i.prototype.show=function(){return 0===t.trim(this.options.content).length?void this.hide():(this.isShow=!0,this.setPosition(),void this.$tips.show().addClass("in"))},i.prototype.hide=function(){this.isShow=!1,this.$tips.hide().removeClass("in")},i.prototype.toggle=function(){return this.isShow?this.hide():this.show(),!1},i}),define("catke/util",function(){"use strict";var t={ie:function(){for(var t,i=3,e=document.createElement("div"),n=e.getElementsByTagName("i");e.innerHTML="<!--[if gt IE "+ ++i+"]><i></i><![endif]-->",n[0];);return i>4?i:t}()};return t}),define("catke/validate",["jquery","validator","catke/toolTips"],function(t,i,e){"use strict";var n=["equals","contains","matches","isEmail","isFQDN","isURL","isIP","isAlpha","isNumeric","isAlphanumeric","isBase64","isHexadecimal","isHexColor","isLowercase","isUppercase","isInt","isFloat","isDivisibleBy","isNull","isLength","isUUID","isDate","isAfter","isBefore","isIn","isCreditCard","isISBN","isJSON","isMultibyte","isAscii","isFullWidth","isHalfWidth","isVariableWidth","isSurrogatePair","isMongoId"],s=function(t){return t.isInstantiate||(t=t()),t},r=function(i,e){if(!1===t.isArray(e))return[s(e)(i),null,s(e).type];if(2===e.length&&"string"===t.type(e[1]))return[s(e[0])(i),e[1],s(e[0]).type];var n=[!0];return t.each(e,function(e,r){if(t.isArray(r)){if(2!==r.length)throw new Error("validator rule fail");if(!1===s(r[0])(i))return n=[!1,r[1],s(r[0]).type],!1}else if(!1===s(r)(i))return n=[!1,null,s(r).type],!1}),n},o=function(i,e){this.options=t.extend(o.DEFAULTS,e||{}),this.rules=this.options.rules,this.$form=i,this.init()};return o.prototype.getFields=function(){this.fields=[];var i=this;this.$form.find("input[name], select[name], textarea[name]").filter(function(){return this.name in i.rules}).each(function(){i.fields.push(t(this))})},o.prototype.init=function(){var i=this;this.getFields(),this.$form.on("focus","input[name], select[name], textarea[name]",function(){i.hideError(t(this))})},o.prototype.valid=function(){var i=!0,e=this.getData(),n=this;return t.each(this.fields,function(t,s){n.hideError(s);var o=s.attr("name"),a=e[o],c=r(a,n.rules[o]);if(i=c[0],!1===i){var l=c[1]||n.getDefErrMsg(c[2]);n.showError(s,l)}return i}),i},o.prototype.hideError=function(t){t.removeClass(this.options.errorClass);var i=t.data("ckTip");i&&i.hide()},o.prototype.showError=function(t,i){t.addClass(this.options.errorClass);var n=t.data("ckTip"),s=this;n?n.setContent('<i class="nicon nicon-warning"></i> '+i):(n=new e(t,{placement:"bottom",trigger:"manual",content:'<i class="nicon nicon-warning"></i> '+i}),n.$tips.css({zIndex:s.options.tipZindex}),t.data("ckTip",n)),n.show()},o.prototype.getDefErrMsg=function(t){var i={required:"这是一个必填项",isEmail:"请正确填写邮箱",isURL:"连接不合法",isAlpha:"只容许字母",isNumeric:"只容许数字",isAlphanumeric:"只容许字母，数字，下划线",isLength:"数值超出范围了",isByteLength:"字符的长度与要求不符"};return i[t]?i[t]:"与要求不符"},o.prototype.getData=function(){var i={},e=this;return e.$form.find("input[name], select[name], textarea[name]").each(function(){var e=t(this);if(e.is("[type=checkbox]")===!1&&e.is("[type=radio]")===!1)i[e.attr("name")]=t.trim(e.val());else if(e.is("[type=radio]:checked"))i[e.attr("name")]=t.trim(e.val());else if(e.is("[type=checkbox]:checked")){var n=e.attr("name");i[n]||(i[n]=[]),i[n].push(e.val())}}),i},o.required=function(){var i=function(i){return t.trim(String(i||"")).length>0};return i.type="required",i.isInstantiate=!0,i},t.each(n,function(t,e){o[e]=function(){var t=arguments.length,n=t>=1?[].slice.call(arguments,0):[],s=function(s){return t===n.length?n.splice(0,0,s):n[0]=s,i[e].apply(null,n)};return s.type=e,s.isInstantiate=!0,s}}),o.DEFAULTS={errorClass:"error",rules:{},tipZindex:10},o}),define("catke",["catke/http","catke/placeholder","catke/popTips","catke/task","catke/toolTips","catke/util","catke/validate"],function(t,i,e,n,s,r,o){return{http:t,placeholder:i,popTips:e,Task:n,ToolTips:s,util:r,Validate:o}});